name = "totp-manager-pages"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Cloudflare Pages 项目
pages_build_output_dir = "totp-manager-frontend/build"

# Node.js 兼容性
node_compat = true

[build]
command = "cd totp-manager-frontend && npm ci && npm run build"

[env.production]
# 生产环境变量 (在 Cloudflare Dashboard 中设置)
# JWT_SECRET = "your-super-secret-jwt-key-here"
# GITHUB_CLIENT_ID = "your-github-client-id"
# GITHUB_CLIENT_SECRET = "your-github-client-secret"
# GITHUB_REDIRECT_URI = "https://your-pages-domain.pages.dev/api/github/callback"
# FRONTEND_URL = "https://your-pages-domain.pages.dev"

[env.preview]
# 预览环境变量
# JWT_SECRET = "preview-jwt-secret"
# FRONTEND_URL = "https://preview.your-pages-domain.pages.dev"

# KV 命名空间 (如果需要数据持久化)
[[kv_namespaces]]
binding = "KV_STORE"
id = "your-kv-namespace-id"
preview_id = "your-preview-kv-namespace-id"

# D1 数据库 (推荐用于生产环境)
# [[d1_databases]]
# binding = "DB"
# database_name = "totp-manager-db"
# database_id = "your-d1-database-id"